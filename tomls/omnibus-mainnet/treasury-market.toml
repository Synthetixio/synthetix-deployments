[provision.treasury_market]
source = "<%= settings.treasury_market_package %>"
targetPreset = "<%= settings.target_preset %>"

options.v3_package = "<%= settings.snx_package %>@<%= settings.target_preset %>"
options.owner = "<%= settings.pdao %>"
options.treasury_address = "<%= settings.treasury %>"
options.pool_id = "<%= extras.treasury_pool_id %>"
options.collateral_token = "<%= settings.snx_address %>"

options.aux_token = "<%= settings.treasury_aux_token_address %>"
options.aux_recipient = "<%= settings.treasury_aux_recipient %>"

# Hardcoding these values as they should never change after initial deployment and updated with updateAuxToken
options.required_aux_token_ratio = "<%= parseEther('0.1') %>"
options.aux_reset_time = "<%= 1423453 %>"

[invoke.TreasureMarketProxy_updateAuxToken_susd]
target = ["treasury_market.Proxy"]
fromCall.func = "owner"
func = "updateAuxToken"
args = [
    "<%= imports.treasury_market.contracts.StakingProxy.address %>",
    "<%= settings.treasury_aux_ratio %>",
    "<%= settings.treasury_aux_reset_time %>",
]
