[setting.cbbtc_issuance_ratio]
defaultValue = "<%= parseEther('10') %>"

[setting.cbbtc_liquidation_ratio]
defaultValue = "<%= parseEther('1.50') %>"

[setting.cbbtc_liquidation_reward]
defaultValue = "<%= parseEther('0.5') %>"

[setting.cbbtc_min_delegation]
defaultValue = "<%= parseEther('50') %>"

[setting.max_collateral_limit_cbbtc]
defaultValue = "<%= parseEther('100') %>"

[invoke.CoreProxy_configureCollateral_cbbtc]
target = ["system.CoreProxy"]
fromCall.func = "owner"
func = "configureCollateral"  # "args" see below in the multiline block

[[invoke.CoreProxy_configureCollateral_cbbtc.args]]
tokenAddress = "<%= settings.cbbtc_address %>"
oracleNodeId = "<%= extras.cbbtc_oracle_id %>"
issuanceRatioD18 = "<%= settings.cbbtc_issuance_ratio %>"
liquidationRatioD18 = "<%= settings.cbbtc_liquidation_ratio %>"
liquidationRewardD18 = "<%= settings.cbbtc_liquidation_reward %>"
minDelegationD18 = "<%= settings.cbbtc_min_delegation %>"
depositingEnabled = false

[invoke.CoreProxy_setPoolCollateralConfiguration_cbbtc]
target = ["system.CoreProxy"]
fromCall.func = "getPoolOwner"
fromCall.args = ["<%= extras.sc_pool_id %>"]
func = "setPoolCollateralConfiguration"
args = [
    "<%= extras.sc_pool_id %>",
    "<%= settings.cbbtc_address %>",
    { collateralLimitD18 = "<%= settings.max_collateral_limit_cbbtc %>", issuanceRatioD18 = 0 },
]
