[var.perps_collateral_sETH_settings]
eth_upper_limit_discount = "<%= parseEther('0.1') %>"
eth_lower_limit_discount = "<%= parseEther('0.01') %>"
eth_discount_scalar = "<%= parseEther('1') %>"
eth_target = "ETH_Perps_rewards"

[provision.RewardsDistributor_PerpsCollateral_sETH_liquidation_rewards]
source = "<%= settings.rewards_distributor_external_package %>"
target = "<%= settings.rewards_distributor_external_package %>@<%= settings.eth_target %>"
options.salt = "<%= settings.salt %>"
options.rewardManager = "<%= imports.system.contracts.CoreProxy.address %>"
options.poolId = "<%= extras.spartan_council_pool_id %>"
options.payoutToken = "<%= extras.synth_eth_token_address %>"
options.payoutTokenDecimals = "18"
options.name = "Perps Collateral Liquidation Rewards for sETH"
options.authorizedDistributor = "<%= imports.perpsFactory.contracts.PerpsMarketProxy.address %>"

[invoke.PerpsMarketProxy_setCollateralConfiguration_eth]
target = ["perpsFactory.PerpsMarketProxy"]
fromCall.func = "owner"
func = "setCollateralConfiguration"
args = [
    "<%= extras.synth_eth_market_id %>",
    "<%= parseEther(settings.synth_eth_max_market_collateral) %>",
    "<%= settings.eth_upper_limit_discount %>",
    "<%= settings.eth_lower_limit_discount %>",
    "<%= settings.eth_discount_scalar %>",
]

[invoke.PerpsMarketProxy_registerDistributor_eth_usdc]
target = ["perpsFactory.PerpsMarketProxy"]
fromCall.func = "owner"
func = "registerDistributor"
args = [
    "<%= settings.synth_eth_token_address %>",
    "<%= imports.RewardsDistributor_PerpsCollateral_sETH_liquidation_rewards.contracts.RewardsDistributorExternal.address %>",
    "<%= settings.synth_eth_market_id %>",
    [
        "<%= settings.arb_address %>",
        "<%= settings.dai_address %>",
        "<%= settings.usdc_address %>",
        "<%= settings.USDe_address %>",
        "<%= settings.weth_address %>",
    ],
]
