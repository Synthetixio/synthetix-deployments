include = ["../core.toml"]

[import.pyth]
source = "pyth:1.4.0"

[invoke.registerLinkOracleNode]
target = ["system.oracle_manager.Proxy"]
func = "registerNode"
args = [
    # 5 = pyth aggregator type 
    5,
    "<%= defaultAbiCoder.encode(['address', 'bytes32', 'uint256'], [imports.pyth.contracts.Pyth.address, settings.pythLinkFeedId, false]) %>",
    []
]
extra.link_oracle_id.event = "NodeRegistered"
extra.link_oracle_id.arg = 0
depends = ["provision.system"]
